<!DOCTYPE html>
<html>
<head>
  <title>People Search</title>
  <link rel="stylesheet" href="/CSS/index.css">
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      text-align: center;
      background-color: #f0f0f0;
    }

    h1 {
      margin-top: 40px;
    }

    #profiles {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      padding: 20px;
    }

    .profile-card {
      background: white;
      border-radius: 10px;
      padding: 15px;
      width: 180px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }

    .profile-card:hover {
      transform: scale(1.05);
    }

    .profile-avatar {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 8px;
    }

    .profile-username {
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>
    <h1>People Search</h1>
  
    <input type="text" id="searchInput" placeholder="Search usernames..." style="padding: 10px; width: 300px; font-size: 16px; margin-bottom: 20px; border-radius: 5px; border: 1px solid #ccc;">
  
    <div id="profiles">Loading...</div>
  
    <script>
      const pastebinURL = "/data/users.json";
      const profilesContainer = document.getElementById("profiles");
      const searchInput = document.getElementById("searchInput");
      let allUsers = [];
  
      fetch(pastebinURL)
        .then(res => res.json())
        .then(users => {
          allUsers = users;
          renderProfiles(allUsers);
        })
        .catch(err => {
          console.error("Failed to load profiles:", err);
          profilesContainer.textContent = "Failed to load profiles.";
        });
  
      function renderProfiles(users) {
        profilesContainer.innerHTML = "";
  
        if (!users.length) {
          profilesContainer.textContent = "No profiles found.";
          return;
        }
  
        users.forEach(user => {
          const card = document.createElement("div");
          card.className = "profile-card";
  
          card.innerHTML = `
            <img src="${user.avatar}" class="profile-avatar" alt="Avatar of ${user.username}">
            <div class="profile-username">${user.username}</div>
          `;
  
          profilesContainer.appendChild(card);
        });
      }
  
      searchInput.addEventListener("input", () => {
        const query = searchInput.value.toLowerCase();
        const filtered = allUsers.filter(user =>
          user.username.toLowerCase().includes(query)
        );
        renderProfiles(filtered);
      });
    </script>
</body>  
</html>
